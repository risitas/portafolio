const translations = {
    es: {
        nav_services: "Servicios",
        nav_samples: "Muestras",
        nav_whyme: "Por qu茅 yo",
        nav_contact: "Contacto",
        hero_badge: "Servicios Profesionales de Texto",
        hero_title: "Transformo audio, im谩genes y datos en <span class='gradient-text'>texto claro, profesional y listo para usar.</span>",
        hero_desc: "Texto preciso, hecho por humanos, para trabajo, contenido y registros.",
        hero_intro: "<strong>Hola, soy Yosimar</strong>, la persona detr谩s de TextMaster. Me especializo en transformar audio, im谩genes y datos sin procesar en texto limpio, organizado y profesional, f谩cil de usar.",
        btn_start: "Iniciar Proyecto",
        btn_samples: "Ver Muestras",
        serv_0_title: "Servicios",
        serv_0_desc: "Soluciones integrales para tus necesidades de informaci贸n.",
        serv_1_title: "Transcripci贸n",
        serv_1_desc: "Audio y video a texto con alta precisi贸n.",
        serv_2_title: "Escaneo a Texto",
        serv_2_desc: "Documentos escaneados o fotos a texto editable.",
        serv_3_title: "Transcripci贸n de Im谩genes",
        serv_3_desc: "Extracci贸n de texto de im谩genes.",
        serv_4_title: "Entrada de Datos",
        serv_4_desc: "Gesti贸n de hojas de c谩lculo y tareas de copiar-pegar.",
        serv_5_title: "Limpieza de Texto",
        serv_5_desc: "Correcci贸n, formato y organizaci贸n.",
        serv_6_title: "Entrega Flexible",
        serv_6_desc: "Formatos Word, PDF o Texto Plano.",
        serv_7_title: "Eliminaci贸n de Muletillas",
        serv_7_desc: "Limpieza opcional de patrones de habla.",
        serv_8_title: "Subt铆tulos (.SRT)",
        serv_8_desc: "Archivos de subt铆tulos sincronizados para video.",
        serv_9_title: "Asistente Virtual",
        serv_9_desc: "Tareas diarias simples y organizaci贸n.",
        samples_title: "Muestras de Trabajo",
        samples_desc: "Ejemplos de mi trabajo de conversi贸n.",
        sample_1_title: "1. Transcripci贸n de Audio",
        sample_1_desc: "Entrevista corta con etiquetas de hablantes.",
        sample_1_before: "Archivo de Audio",
        sample_1_p1: "<strong>Entrevistador:</strong> 驴Puedes explicar el proceso?",
        sample_1_p2: "<strong>Experto:</strong> Comienza con el an谩lisis de datos brutos.",
        sample_2_title: "2. Video con Marcas de Tiempo",
        sample_2_desc: "Transcripci贸n estilo YouTube.",
        sample_2_before: "Clip de Video",
        sample_2_p1: "<span class='highlight'>[00:12]</span> Bienvenidos al canal.",
        sample_2_p2: "<span class='highlight'>[00:15]</span> Hoy discutimos sobre IA.",
        sample_3_title: "3. Imagen a Texto",
        sample_3_desc: "Texto limpio de documentos escaneados.",
        sample_3_before: "Escaneo / IMG",
        sample_3_p1: "<strong>FACTURA #1024</strong>",
        sample_3_p2: "Total a Pagar: $500.00",
        sample_3_p3: "Fecha: 12 Dic, 2024",
        sample_4_title: "4. Entrada de Datos",
        sample_4_desc: "Info de PDF a tabla de hoja de c谩lculo.",
        sample_4_before: "Lista PDF:<br>- Item A (Stock: 5)<br>- Item B (Stock: 2)",
        sample_4_th1: "Item",
        sample_4_th2: "Stock",
        sample_5_title: "5. Subt铆tulos (.SRT)",
        sample_5_desc: "Archivo de subt铆tulos sincronizado.",
        sample_5_code: "1<br>00:00:01 --> 00:00:04<br>Hola a todos.<br><br>2<br>00:00:04 --> 00:00:06<br>Empecemos.",
        sample_6_title: "6. Limpieza de Texto",
        sample_6_desc: "Eliminaci贸n de muletillas y formato.",
        sample_6_before: "O sea, em, tipo, el plan es... destinado a representar, 驴sabes?",
        sample_6_p1: "El plan est谩 destinado a representar la idea central.",
        whyme_title: "Por Qu茅 Elegirme",
        whyme_1_title: "Alta Precisi贸n",
        whyme_1_desc: "Atenci贸n al detalle y precisi贸n.",
        whyme_2_title: "Comunicaci贸n Amable",
        whyme_2_desc: "Comunicaci贸n r谩pida y clara.",
        whyme_3_title: "Entrega Puntual",
        whyme_3_desc: "Servicio confiable con el que puedes contar.",
        whyme_4_title: "Resultados Organizados",
        whyme_4_desc: "Salida limpia y f谩cil de leer.",
        whyme_5_title: "Profesional",
        whyme_5_desc: "Un socio confiable para tu trabajo.",
        contact_title: "Trabajemos Juntos",
        contact_desc: "Env铆ame un mensaje para discutir tu pr贸ximo proyecto.",
        contact_av: "Disponible Ahora",
        label_name: "Nombre",
        label_email: "Correo",
        label_message: "Mensaje",
        btn_send: "Enviar Mensaje",
        btn_sending: "Enviando...",
        btn_sent: "隆Mensaje Enviado!",
        msg_sent_bubble: "隆Mensaje Enviado!",
        msg_sent_desc: "Gracias por contactarme. Responder茅 pronto.",
        footer_rights: "&copy; 2024 TextMaster. Todos los derechos reservados.",
        toggle_btn: "吼 EN" // Button text when curr lang is ES
    },
    en: {
        nav_services: "Services",
        nav_samples: "Work Samples",
        nav_whyme: "Why Me",
        nav_contact: "Contact",
        hero_badge: "Professional Text Services",
        hero_title: "I transform audio, images, and data into <span class='gradient-text'>clear, professional, ready-to-use text.</span>",
        hero_desc: "Accurate, human-made text for work, content and records.",
        hero_intro: "<strong>Hi, Im Yosimar</strong>, the person behind TextMaster. I specialize in transforming audio, images and raw data into clean, organized and professional text that is easy to use.",
        btn_start: "Start a Project",
        btn_samples: "View Work Samples",
        serv_0_title: "Services",
        serv_0_desc: "Comprehensive solutions for your information needs.",
        serv_1_title: "Transcription",
        serv_1_desc: "Audio & video to text with high accuracy.",
        serv_2_title: "Scan to Text",
        serv_2_desc: "Photo or scanned documents to editable text.",
        serv_3_title: "Image Transcription",
        serv_3_desc: "Extracting text from images.",
        serv_4_title: "Data Entry",
        serv_4_desc: "Copy-paste tasks and spreadsheet management.",
        serv_5_title: "Text Cleaning",
        serv_5_desc: "Proofreading, formatting, and organizing.",
        serv_6_title: "Flexible Delivery",
        serv_6_desc: "Word, PDF, or Plain Text formats.",
        serv_7_title: "Filler Removal",
        serv_7_desc: "Optional removal of 'umms' and 'ahhs'.",
        serv_8_title: "Subtitles (.SRT)",
        serv_8_desc: "Synchronized subtitle files for video.",
        serv_9_title: "Virtual Assistant",
        serv_9_desc: "Simple daily tasks and organization.",
        samples_title: "Work Samples",
        samples_desc: "Examples of my conversion work.",
        sample_1_title: "1. Audio Transcription",
        sample_1_desc: "Short interview with speaker labels.",
        sample_1_before: "Audio File",
        sample_1_p1: "<strong>Interviewer:</strong> Can you explain the process?",
        sample_1_p2: "<strong>Expert:</strong> It starts with raw data analysis.",
        sample_2_title: "2. Video with Timestamps",
        sample_2_desc: "YouTube-style transcription.",
        sample_2_before: "Video Clip",
        sample_2_p1: "<span class='highlight'>[00:12]</span> Welcome to the channel.",
        sample_2_p2: "<span class='highlight'>[00:15]</span> Today we discuss AI.",
        sample_3_title: "3. Image to Text",
        sample_3_desc: "Clean text from scanned documents.",
        sample_3_before: "Scan / IMG",
        sample_3_p1: "<strong>INVOICE #1024</strong>",
        sample_3_p2: "Total Due: $500.00",
        sample_3_p3: "Date: Dec 12, 2024",
        sample_4_title: "4. Data Entry",
        sample_4_desc: "PDF info to Spreadsheet table.",
        sample_4_before: "PDF List:<br>- Item A (Stock: 5)<br>- Item B (Stock: 2)",
        sample_4_th1: "Item",
        sample_4_th2: "Stock",
        sample_5_title: "5. Subtitles (.SRT)",
        sample_5_desc: "Synchronized caption file.",
        sample_5_code: "1<br>00:00:01 --> 00:00:04<br>Hello everyone.<br><br>2<br>00:00:04 --> 00:00:06<br>Let's begin.",
        sample_6_title: "6. Text Cleaning",
        sample_6_desc: "Removing filler words & formatting.",
        sample_6_before: "So, um, like, the plan is... meant to represent, you know?",
        sample_6_p1: "The plan is meant to represent the core idea.",
        whyme_title: "Why Choose Me",
        whyme_1_title: "High Accuracy",
        whyme_1_desc: "Attention to detail and precision.",
        whyme_2_title: "Friendly Comms",
        whyme_2_desc: "Fast and clear communication.",
        whyme_3_title: "On-time Delivery",
        whyme_3_desc: "Reliable service you can count on.",
        whyme_4_title: "Organized Results",
        whyme_4_desc: "Clean and easy to read output.",
        whyme_5_title: "Professional",
        whyme_5_desc: "A reliable partner for your work.",
        contact_title: "Let's Work Together",
        contact_desc: "Send me a message to discuss your next project.",
        contact_av: "Available Now",
        label_name: "Name",
        label_email: "Email",
        label_message: "Message",
        btn_send: "Send Message",
        btn_sending: "Sending...",
        btn_sent: "Message Sent!",
        msg_sent_bubble: "Message Sent!",
        msg_sent_desc: "Thanks for reaching out. I'll reply soon.",
        footer_rights: "&copy; 2024 TextMaster. All rights reserved.",
        toggle_btn: "拆 ES" // Button text when curr lang is EN
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // 1. Language Toggle Logic
    const langToggle = document.getElementById('lang-toggle');
    const storedLang = localStorage.getItem('lang') || 'es';

    // Initial Set
    setLanguage(storedLang, false);

    if (langToggle) {
        langToggle.addEventListener('click', (e) => {
            e.preventDefault();
            const currentLang = localStorage.getItem('lang') || 'es';
            const newLang = currentLang === 'es' ? 'en' : 'es';

            // Animation
            document.body.classList.add('fade-out');

            setTimeout(() => {
                setLanguage(newLang, true);
                document.body.classList.remove('fade-out');
            }, 300); // Wait for fade out
        });
    }

    // 2. Contact Form Logic
    const contactForm = document.querySelector('.contact-form');
    const successMsg = document.querySelector('.success-message');
    const contactText = document.querySelector('.contact-text');
    const resetBtn = document.getElementById('reset-form-btn');

    if (resetBtn) {
        resetBtn.addEventListener('click', () => {
            successMsg.style.display = 'none';
            contactForm.style.display = 'block';
            contactText.style.display = 'block';
            contactForm.reset();
        });
    }

    if (contactForm) {
        contactForm.addEventListener('submit', function (e) {
            e.preventDefault();

            const currentLang = localStorage.getItem('lang') || 'es';
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const messageInput = document.getElementById('message');
            const submitBtn = contactForm.querySelector('button[type="submit"]');

            // Reset errors
            [nameInput, emailInput, messageInput].forEach(input => {
                input.classList.remove('input-error');
            });

            // Validation
            let isValid = true;
            if (!nameInput.value.trim()) {
                nameInput.classList.add('input-error');
                isValid = false;
            }
            if (!emailInput.value.trim()) { // Simple check
                emailInput.classList.add('input-error');
                isValid = false;
            }
            if (!messageInput.value.trim()) {
                messageInput.classList.add('input-error');
                isValid = false;
            }

            if (!isValid) return;

            // Animation & Send
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = translations[currentLang].btn_sending || "Sending...";

            // Send to Formspree via AJAX
            fetch("https://formspree.io/f/xjknzbln", { // Use the ID provided or placeholder
                method: "POST",
                body: new FormData(contactForm),
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    // Success Avatar Animation
                    contactForm.style.display = 'none';
                    contactText.style.display = 'none';
                    successMsg.style.display = 'flex';

                    // Reset button state silently
                    submitBtn.classList.remove('btn-success');
                    submitBtn.disabled = false;
                    const key = submitBtn.getAttribute('data-i18n');
                    if (key && translations[currentLang][key]) {
                        submitBtn.textContent = translations[currentLang][key];
                    } else {
                        submitBtn.textContent = originalText;
                    }
                } else {
                    // Error
                    alert("Oops! There was a problem sending your message.");
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }
            }).catch(error => {
                alert("Oops! There was a problem sending your message.");
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
            });
        });

        // Remove error on input
        const inputs = contactForm.querySelectorAll('input, textarea');
        inputs.forEach(input => {
            input.addEventListener('input', () => {
                input.classList.remove('input-error');
            });
        });
    }

    function setLanguage(lang, animate) {
        localStorage.setItem('lang', lang);

        // Update button text
        if (langToggle) {
            langToggle.textContent = lang === 'es' ? '吼 EN' : '拆 ES';
        }

        // Update content
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translations[lang][key];
                } else {
                    element.innerHTML = translations[lang][key];
                }
            }
        });
    }

    // 3. Smooth Scroll
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });

    // 4. Scroll Animations
    const observerOptions = {
        threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    const animatedElements = document.querySelectorAll('.service-card, .timeline-item, .about-card, .contact-wrapper');
    animatedElements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'all 0.6s ease-out';
        observer.observe(el);
    });
});
